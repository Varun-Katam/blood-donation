<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blood Donation App</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg,#ff6a6a,#ffb86c);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .container {
      background: white;
      padding: 25px;
      border-radius: 12px;
      width: 360px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }

    h2 { text-align:center; color:#d63031; }

    label { font-weight:bold; margin-top:10px; display:block; }

    input, select {
      width:100%;
      padding:8px;
      margin-top:5px;
      border-radius:6px;
      border:1px solid #ccc;
    }

    button {
      width:100%;
      padding:10px;
      margin-top:20px;
      border:none;
      border-radius:6px;
      background:#d63031;
      color:white;
      font-size:16px;
      cursor:pointer;
    }

    button:hover { background:#b71c1c; }

    #donorList {
      margin-top:15px;
      max-height:150px;
      overflow:auto;
      font-size:14px;
    }

    .card {
      background:#ffeaea;
      padding:8px;
      margin:6px 0;
      border-radius:6px;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Blood Donation</h2>

  <form id="bloodForm">
    <label>Name</label>
    <input type="text" id="name" required>

    <label>Mobile</label>
    <input type="tel" id="mobile" required>

    <label>Location</label>
    <input type="text" id="location" required>

    <label>I am a</label>
    <select id="role" required>
      <option value="">Select</option>
      <option value="Donor">Donor</option>
      <option value="Receiver">Receiver</option>
    </select>

    <label>Blood Group</label>
    <select id="blood">
      <option>A+</option>
      <option>A-</option>
      <option>B+</option>
      <option>B-</option>
      <option>O+</option>
      <option>O-</option>
      <option>AB+</option>
      <option>AB-</option>
    </select>

    <button type="submit">Submit</button>
  </form>

  <div id="donorList"></div>
</div>

<script>
  // ðŸ”´ PASTE YOUR FIREBASE CONFIG HERE
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyC8LYxLXy0iDvS24YC5qViUxV64p9IWsY0",
  authDomain: "blood-donation-4c44a.firebaseapp.com",
  projectId: "blood-donation-4c44a",
  databaseURL: "https://blood-donation-4c44a-default-rtdb.asia-southeast1.firebasedatabase.app",
  storageBucket: "blood-donation-4c44a.firebasestorage.app",
  messagingSenderId: "417183371166",
  appId: "1:417183371166:web:f45094db0bf6f66e68108f",
  measurementId: "G-3KYZ08RFCM"
};

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const form = document.getElementById("bloodForm");
form.addEventListener("submit", function(e) {
  e.preventDefault();

  const user = {
    name: document.getElementById("name").value,
    mobile: document.getElementById("mobile").value,
    location: document.getElementById("location").value,
    role: document.getElementById("role").value,
    blood: document.getElementById("blood").value
  };

  db.ref("users").push(user)
    .then(() => alert("Submitted Successfully!"))
    .catch(err => alert("Error: " + err.message));

  form.reset();
});

  // ðŸ”´ Show donors in real-time
  db.ref("users").on("value", snapshot => {
  const data = snapshot.val();
  donorList.innerHTML = "<h3>Available Donors</h3>";

  if (!data) {
    donorList.innerHTML += "No donors yet";
    return;
  }

  for (let id in data) {
    if (data[id].role === "Donor") {
      donorList.innerHTML += `
        <div class="card">
          <b>${data[id].name}</b><br>
          Blood: ${data[id].blood}<br>
          Location: ${data[id].location}<br>
          ðŸ“ž ${data[id].mobile}
        </div>`;
    }
  }
});
</script>

</body>
</html>
